/* onguard/css/chatbot_creation/chatbot-ui.css */
/* Styles for the chat UI elements within chatbot-widget.html (iframe content) */

/*
  Define chatbot UI specific variables.
  These will inherit from the global theme variables passed from the parent window.
  The actual global variables like var(--primary-color) won't be directly available
  here unless the iframe's content explicitly imports global.css or has them defined.
  For now, we'll define them assuming the theme (data-theme) is propagated to the iframe's body.
  The JS part (step 2b) will handle this propagation.

  The variables defined here use literal color values derived from the global theme
  to ensure the chatbot UI is self-sufficient for theming once `data-theme` is set on its body.
  The `font-family` is also explicitly set here.
*/

body { /* Default to light theme values directly in body, then override in body[data-theme="dark"] */
  --chatbot-font-family: 'Segoe UI', sans-serif;
  --chatbot-bg-color: #ffffff;
  --chatbot-text-color: #333333;
  --chatbot-border-color: #ddd;
  --chatbot-input-bg-color: #ffffff;
  --chatbot-input-text-color: #333333;
  --chatbot-input-border-color: #ccc;
  --chatbot-input-focus-border-color: #4b0082;
  --chatbot-input-focus-shadow-color: rgba(75, 0, 130, 0.2);
  --chatbot-log-bg-color: #f9f9f9;
  --chatbot-user-message-bg: #4b0082;
  --chatbot-user-message-text: #ffffff;
  --chatbot-bot-message-bg: #e9e9f0; /* Adjusted light grey */
  --chatbot-bot-message-text: #333333;
  --chatbot-send-button-icon-color: #4b0082;
  --chatbot-send-button-hover-bg: rgba(75, 0, 130, 0.1);
  --chatbot-recaptcha-text-color: #555;
  --chatbot-recaptcha-checkbox-accent-color: #4b0082;

  font-family: var(--chatbot-font-family);
  background-color: var(--chatbot-bg-color);
  color: var(--chatbot-text-color);
  margin: 0;
  display: flex;
  flex-direction: column;
  height: 100vh; /* Ensure body takes full height of iframe */
}

.chat-log {
  flex: 1;
  padding: 1rem;
  overflow-y: auto;
  background: var(--chatbot-log-bg-color);
  display: flex;
  flex-direction: column;
}

.message {
  margin: 0.5rem 0;
  padding: 0.75rem 1rem;
  border-radius: 20px;
  max-width: 80%;
  word-wrap: break-word;
  line-height: 1.4;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

.message.user-message {
  background: var(--chatbot-user-message-bg);
  color: var(--chatbot-user-message-text);
  align-self: flex-end;
  margin-left: auto;
  border-bottom-right-radius: 5px;
}

.message.bot-message {
  background: var(--chatbot-bot-message-bg);
  color: var(--chatbot-bot-message-text);
  align-self: flex-start;
  margin-right: auto;
  border-bottom-left-radius: 5px;
}

.chat-form {
  display: flex;
  align-items: center; /* Align items for button and input height */
  border-top: 1px solid var(--chatbot-border-color);
  padding: 0.75rem;
  background: var(--chatbot-bg-color); /* Match overall chat window background */
}

.chat-form input#chat-input {
  flex: 1;
  padding: 0.6rem 1rem; /* Adjusted padding for vertical alignment with button */
  border: 1px solid var(--chatbot-input-border-color);
  border-radius: 20px;
  font-size: 1rem;
  outline: none;
  margin-right: 0.5rem;
  background-color: var(--chatbot-input-bg-color);
  color: var(--chatbot-input-text-color);
}
.chat-form input#chat-input:focus {
  border-color: var(--chatbot-input-focus-border-color);
  box-shadow: 0 0 0 2px var(--chatbot-input-focus-shadow-color);
}

/* Styles for the reCAPTCHA placeholder */
.recaptcha-placeholder-container {
  padding: 0.25rem 0.5rem 0.25rem 0; /* Reduced padding, esp. right */
  display: flex;
  align-items: center;
  font-size: 0.8rem;
  color: var(--chatbot-recaptcha-text-color);
}

.recaptcha-label {
  display: flex;
  align-items: center;
  cursor: pointer;
}

#human-verification-checkbox {
  margin-right: 0.3rem;
  width: 16px; /* Adjust size */
  height: 16px; /* Adjust size */
  accent-color: var(--chatbot-recaptcha-checkbox-accent-color); /* Theme the checkbox color */
}

.recaptcha-text {
  line-height: 1;
}

/* Send button - styled as a triangle */
.chat-form button#chat-send-button {
  background: none;
  border: none;
  padding: 0;
  margin-left: 0.5rem;
  width: 36px; /* Adjust size of the clickable area */
  height: 36px; /* Adjust size of the clickable area */
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%; /* Make it circular for a modern look */
  transition: background-color 0.2s ease;
}

.chat-form button#chat-send-button:hover {
  background-color: var(--chatbot-send-button-hover-bg);
}

.chat-form button#chat-send-button::before {
  content: '';
  display: block;
  width: 0;
  height: 0;
  border-top: 8px solid transparent;      /* Half of height */
  border-bottom: 8px solid transparent;   /* Half of height */
  border-left: 12px solid var(--chatbot-send-button-icon-color); /* Color and width of triangle */
  margin-left: 3px; /* Adjust to center the triangle if container is circular */
}

/* Dark theme considerations for UI inside iframe */
/* This requires chatbot-widget.html's body to get data-theme attribute from parent */
body[data-theme="dark"] {
  --chatbot-bg-color: var(--bg-dark, #121212);
  --chatbot-text-color: var(--text-color-dark-theme, #e0e0e0);
  --chatbot-border-color: var(--border-color-current, #444);
  --chatbot-input-bg-color: var(--input-bg-current, #333);
  --chatbot-input-text-color: var(--text-color-dark-theme, #e0e0e0);
  --chatbot-input-border-color: var(--input-border-current, #555);
  --chatbot-input-focus-border-color: var(--link-color-current, #bb86fc); /* Use link color for dark focus */
  --chatbot-input-focus-shadow-color: rgba(187, 134, 252, 0.25);

  --chatbot-log-bg-color: #1e1e1e; /* Slightly lighter than main dark bg */

  --chatbot-user-message-bg: var(--link-color-current, #bb86fc); /* Dark theme primary action color */
  --chatbot-user-message-text: var(--bg-dark, #121212); /* Text on dark theme primary action */

  --chatbot-bot-message-bg: #3a3a3a; /* Darker grey for bot messages */
  --chatbot-bot-message-text: var(--text-color-dark-theme, #e0e0e0);

  --chatbot-send-button-icon-color: var(--link-color-current, #bb86fc);
  --chatbot-send-button-hover-bg: rgba(187, 134, 252, 0.15);

  --chatbot-recaptcha-text-color: #aaa;
  --chatbot-recaptcha-checkbox-accent-color: var(--link-color-current, #bb86fc);
}

/* Ensure scrollbars are also themed if possible (browser dependent) */
body[data-theme="dark"] .chat-log::-webkit-scrollbar {
    width: 8px;
}
body[data-theme="dark"] .chat-log::-webkit-scrollbar-track {
    background: var(--chatbot-log-bg-color);
}
body[data-theme="dark"] .chat-log::-webkit-scrollbar-thumb {
    background-color: var(--chatbot-border-color);
    border-radius: 4px;
    border: 2px solid var(--chatbot-log-bg-color);
}

.chat-log::-webkit-scrollbar { /* Light theme scrollbar */
    width: 8px;
}
.chat-log::-webkit-scrollbar-track {
    background: var(--chatbot-log-bg-color);
}
.chat-log::-webkit-scrollbar-thumb {
    background-color: #c1c1c1; /* A neutral scrollbar color for light theme */
    border-radius: 4px;
    border: 2px solid var(--chatbot-log-bg-color);
}

/* General body styling for the iframe content */
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden; /* The body of the iframe should not scroll; .chat-log does */
    font-family: var(--font-family, 'Segoe UI', sans-serif); /* Ensure font is inherited */
}
#chatbot-container { /* Matches the ID in chatbot-widget.html */
    display: flex;
    flex-direction: column;
    height: 100%;
    background-color: var(--chatbot-bg-color); /* Use variable for the main container */
}

/* Add a small transition for color changes */
.message, .chat-form, .chat-form input#chat-input, body {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}
