/* css/base/small-screens.css */
/* Styles primarily for mobile-specific navigation components and layout adjustments */

@media (max-width: 768px) {
    /* Hide ALL desktop header navigation elements on small screens */
    header nav.desktop-nav,
    header .toggle-container,
    header .header-menu-trigger,
    #rightSideMenu {
        display: none !important;
    }

    /* Modal content adjustments for small screens - from user's global.css and example */
    .modal-content {
        width: 100%; /* User example had 95%, but full width is common for mobile modals */
        max-width: 100%;
        height: 100%; /* User example had 90vh */
        max-height: 100vh;
        border-radius: 0;
        border: none;
        box-shadow: none;
    }
    .modal-overlay.active {
        padding: 0;
    }
    .modal-body form {
        grid-template-columns: 1fr; /* Stack grid items */
        gap: 0.75rem;
    }

    /* Services Preview Section on index.html for small screens */
    .services { /* Parent container of service-items */
        flex-direction: column; /* Stack items vertically */
        align-items: center; /* Center items if they don't take full width */
    }
    .service-item {
        width: 90%; /* Make items take more width, e.g., 90% */
        margin-bottom: 1rem; /* Ensure space between stacked items */
        /* calc(25% - 1rem) from global.css is overridden here */
    }

    /* Styling for content within the generic service modal on small screens */
    /* #generic-service-modal is already handled by .modal-overlay and .modal-content rules for sizing */
    #generic-service-modal .service-modal-body-content {
        padding: 0.5rem; /* Add some padding inside the content area */
    }
    #generic-service-modal .service-modal-body-content h1 {
        font-size: 1.5rem; /* Adjust down from typical page H1 for modal context */
        margin-bottom: 0.75rem;
        color: var(--primary-color); /* Or use text-current if themed differently */
    }
    body[data-theme="dark"] #generic-service-modal .service-modal-body-content h1 {
        color: var(--link-color-current); /* Consistent with other dark theme headings */
    }
    #generic-service-modal .service-modal-body-content p {
        font-size: 0.95rem;
        line-height: 1.5;
        margin-bottom: 0.75rem;
    }
    /* Add more specific styling for lists, images within service content if needed */


    /* Mobile Navigation Variables */
    :root {
        /* --mobile-nav-base-height: 55px; /* Will be intrinsic now */
        --mobile-nav-bottom-offset: env(safe-area-inset-bottom, 0px);
        --mobile-nav-vertical-padding: 0.5rem; /* From user example */
        /* Estimate nav height for body padding. Actual height will be intrinsic.
           Approx icon (1.5rem) + span (0.8rem) + padding. Let's use a fixed value for now. */
        --mobile-nav-estimated-height: 60px;
    }

    /* Mobile Bottom Navigation Bar - Styled as per user example */
    .mobile-nav {
        display: flex;
        justify-content: space-around; /* Distribute items evenly */
        align-items: center; /* Vertically center items */
        position: fixed;
        bottom: 10px; /* Small gap from bottom */
        right: 7.5%; /* Centering the 85% width bar */
        width: 85%;

        background-color: #fff; /* User example */
        border: 1px solid #ccc; /* User example for border, not just top */
        border-radius: 20px; /* User example */

        padding-top: var(--mobile-nav-vertical-padding);
        padding-bottom: calc(var(--mobile-nav-vertical-padding) + var(--mobile-nav-bottom-offset));
        padding-left: 0.5rem; /* Horizontal padding for content inside */
        padding-right: 0.5rem;

        box-shadow: 0 -2px 10px rgba(0,0,0,0.15); /* Slightly more pronounced shadow */
        box-sizing: border-box;
        z-index: 3000; /* User example */
    }

    .mobile-nav-item {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-decoration: none;
        color: #333; /* User example */
        font-size: 0.8rem; /* User example for the span text */
        background: none;
        border: none;
        cursor: pointer;
        padding: 0.2rem; /* Minimal padding for items themselves */
        text-align: center;
        line-height: 1.2;
        flex-grow: 1; /* Allow items to grow and share space */
        flex-basis: 0; /* Ensure flex-grow works from a zero basis */
    }

    .mobile-nav-item span {
        font-size: 0.75rem; /* Adjusted slightly from user example for clarity */
        margin-top: 3px; /* Increased spacing */
        display: block; /* Ensure it takes its own line if text wraps */
    }

    .mobile-nav-item i {
        font-size: 1.5rem; /* User example */
        margin-bottom: 2px; /* Small space between icon and text */
    }

    /* For indicating current page, if applicable via JS adding this class */
    .mobile-nav-item.active-page-link {
        color: var(--accent-color); /* Existing variable, or a new one if specified */
    }
    .mobile-nav-item.active-page-link i,
    .mobile-nav-item.active-page-link span {
        color: var(--accent-color);
    }


    /* Mobile Services Menu - Styled as per user example */
    #mobile-services-menu {
        position: fixed;
        /* Position it relative to the .mobile-nav bar */
        bottom: calc(var(--mobile-nav-estimated-height) + 20px + var(--mobile-nav-bottom-offset)); /* Approx nav height + gap + safe area */
        right: 7.5%; /* Align with the mobile-nav bar */
        width: 85%; /* Match mobile-nav bar width */

        background-color: #fff; /* User example */
        border: 1px solid #ccc; /* User example */
        border-radius: 15px; /* Slightly rounded corners */
        padding: 1rem; /* User example */

        box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        z-index: 2999; /* Below mobile-nav but above other content */

        transform: translateY(110%); /* Start further down to ensure it's hidden */
        transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        opacity: 0;
        visibility: hidden; /* Hide when not active */

        box-sizing: border-box;
        max-height: 50vh; /* Adjusted from 50% */
        overflow-y: auto;
    }

    #mobile-services-menu.active {
        transform: translateY(0);
        opacity: 1;
        visibility: visible;
    }

    #mobile-services-menu ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    #mobile-services-menu ul li {
        margin-bottom: 0; /* Remove default margin */
        border-bottom: 1px solid #eee; /* User example */
    }
    #mobile-services-menu ul li:last-child {
        border-bottom: none;
    }

    #mobile-services-menu ul li a {
        display: block;
        padding: 0.75rem 0.5rem;
        text-decoration: none;
        color: #333; /* User example */
        font-weight: normal; /* User example implies normal weight */
        font-size: 1rem; /* User example */
    }
     #mobile-services-menu ul li a:hover {
        background-color: #f0f0f0;
     }

    /* Body padding to avoid overlap with fixed mobile nav */
    body.mobile-nav-active {
      /* Adjust padding based on the estimated height of the new mobile nav + its bottom offset */
      padding-bottom: calc(var(--mobile-nav-estimated-height) + 20px + var(--mobile-nav-bottom-offset));
    }

    /* Floating icons adjustments (if this class is used elsewhere) */
    body.mobile-nav-active .floating-icons {
        /* Adjust if floating icons need to be aware of the new nav bar height */
        bottom: calc(var(--mobile-nav-estimated-height) + 30px + var(--mobile-nav-bottom-offset));
    }

    /* Dark Mode Styles - Integrated with data-theme from main.js */
    body[data-theme="dark"] .mobile-nav {
        background-color: #222; /* User example */
        border-color: #444; /* User example */
    }

    body[data-theme="dark"] .mobile-nav-item {
        color: #eee; /* User example */
    }
     body[data-theme="dark"] .mobile-nav-item i,
     body[data-theme="dark"] .mobile-nav-item span {
        /* Ensure icon and span also inherit or get the dark mode color */
        color: #eee;
     }

    body[data-theme="dark"] #mobile-services-menu {
        background-color: #222; /* User example */
        border-color: #444; /* User example */
    }

    body[data-theme="dark"] #mobile-services-menu ul li a {
        color: #eee; /* User example */
    }
    body[data-theme="dark"] #mobile-services-menu ul li {
        border-bottom-color: #444;
    }
    body[data-theme="dark"] #mobile-services-menu ul li a:hover {
        background-color: #333;
    }

    /* Ensure desktop styles hide mobile nav specific elements */
} /* End of @media (max-width: 768px) */

/* Rule to hide mobile nav on larger screens (from user example) */
@media screen and (min-width: 769px) {
  .mobile-nav,
  #mobile-services-menu { /* Target by ID for services menu */
    display: none !important; /* Ensure it's hidden */
  }
  /* Remove body padding if it was added */
  body.mobile-nav-active {
    padding-bottom: 0;
  }
}
